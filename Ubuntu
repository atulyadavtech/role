##wget -O - https://raw.githubusercontent.com/atulyadavtech/role/master/Ubuntu | bash
##Ubuntu-18.04 Start UP

#Disable Cloud Package 
echo 'datasource_list: [ None ]' | sudo -s tee /etc/cloud/cloud.cfg.d/90_dpkg.cfg
apt-get purge cloud-init -y
rm -rf /etc/cloud/; sudo rm -rf /var/lib/cloud/
echo "Package Installation Done"
#Disable the unwanted Pacakage
systemctl disable apparmor cups cups-browsed speech-dispatcher spice-vdagent unattended-upgrades plymouth
echo "Package Service Unwanted Done"

#Modify the deafult time value for service recovery 
echo "DefaultTimeoutStartSec=5s" >> /etc/systemd/system.conf
echo "DefaultTimeoutStopSec=5s" >> /etc/systemd/system.conf

#Modify the SSH Configuration for root access
echo "PermitRootLogin yes" >> /etc/ssh/sshd_config
echo "UseDNS no" >> /etc/ssh/sshd_config

https://raw.githubusercontent.com/atulyadavtech/help/master/ssh.sh -O /etc/profile.d/ssh.sh
https://raw.githubusercontent.com/atulyadavtech/help/master/ssh.csh -O /etc/profile.d/ssh.csh

echo "SSH Done"
echo "Network Config"
sed -i -e 's/ens32/eth0/' /etc/netplan/50-cloud-init.yaml
sed -i '10s/^/            dhcp-identifier: mac\n/' /etc/netplan/50-cloud-init.yaml

echo "Grub Configuration"
sed -i -e 's/GRUB_CMDLINE_LINUX_DEFAULT=""/GRUB_CMDLINE_LINUX_DEFAULT="net.ifnames=0 biosdevname=0"/' /etc/default/grub
grub-mkconfig -o /boot/grub/grub.cfg


##Create the profile /etc/profile.d/z-env.sh 
wget https://raw.githubusercontent.com/atulyadavtech/Conf-Files/f5dcd7f5acbdc3b4623ee967c69ea567166cfe0a/z-env.sh -O /etc/profile.d/z-env.sh
echo "Final Done"

